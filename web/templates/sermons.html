<!doctype html>
<html lang="en">
{% include 'head.html' %}

<body>

    <header class="sms_header">
        {% include 'link.html' %}

        <h2 class="navbar_caption">INSPIRATIONAL MESSAGES TO <br> STRENGTHEN YOUR FAITH.</h2>

    </header>


    <h3 class="sms-h3">SERMONS LIST</h3>

    <div class="sms-list">
        <div class="sms-container">
            {% if sermons is defined %}
            {% for sermon in sermons[0] %}
                <a href="/sermon/{{ sermon['_id'] }}" aria-label="single-sermon" style="text-decoration: none;" >
                    <div class="single-sermon">
                        <div class="img">
                            <i class="bi bi-play-circle-fill"></i>
                            <img src="{{ sermon['image'] }}" alt="sermon-image">
                        </div>
    
                        <div class="content">
                            <span class="time">&raquo; 30+ Mins</span>
                            <span class="topic">{{ sermon['title'] | upper }}</span>
                            <span class="intro">{{sermon["message"] | safe | upper | truncate(80, True, '...')}}</span>
                        </div>
                    </div>
                </a>
            {% endfor %}
            {% endif %}
        </div>
    </div>

    <div class="pagination">
        {% if sermons != [] and sermons != none %}
        {% set page_num = request.args.get('page_num', 1) | int %}
        {% set total_sermons = sermons[1] | int %}
        {% set per_page = 6 %}
        {% set total_pages = (total_sermons + per_page - 1) // per_page %}


        {% if page_num > 1 %}
        <button onclick="updatePageNumber({{ page_num - 1 }});">
            <i class="fa fa-arrow-left" aria-hidden="true"></i> Previous
        </button>
        {% endif %}

        <div class="nums">
            {% if page_num >= 1 and page_num <= 5 %}
                {% for num in range(1, page_num + 1) %}
                    {% if num == page_num %}
                        <a class="my-auto active">{{num}}</a>
                    {% else %}
                        <a href="/sermons?page_num={{num}}" class="my-auto">{{num}}</a>
                    {% endif %}
                {% endfor %}
                <a class="my-auto">...</a>
                {% if page_num != total_pages %}
                    <a href="/sermons?page_num={{total_pages}}" class="my-auto">{{total_pages}}</a>
                {% endif %}
            {% elif page_num >  5 %}
                <a href="/sermons?page_num={{page_num - 2}}" class="my-auto">{{page_num - 2}}</a>
                <a href="/sermons?page_num={{page_num - 1}}" class="my-auto">{{page_num - 1}}</a>
                {% if page_num != total_pages %}
                        <a class="my-auto active">{{page_num}}</a>
                {% endif %}
                <a class="my-auto">...</a>
                <a href="/sermons?page_num={{total_pages}}" class="my-auto">{{total_pages}}</a>
            {% endif %}
        </div>

        {% if page_num < total_pages %}
        <button onclick="updatePageNumber_nextButton()">
          Next  <i class="fa fa-arrow-right" aria-hidden="true"></i>
        </button>
        {% endif %}
        {% endif %}
       
    </div>



   



    {% include 'footer.html' %}






    <script src="../static/index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
