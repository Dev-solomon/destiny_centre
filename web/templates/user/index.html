<!doctype html>
<html lang="en">
 {% include 'user/head.html' %}
  <body>
    <header>
      {% include 'user/header.html' %}
      

      <!-- search -->
      <div class="mx-5 mt-4 md:mx-[60px] md:mt-[52px] lg:hidden">
        <form action="" class="relative w-full">
          <div
            class="absolute left-[14px] top-1/2 flex -translate-y-1/2 transform items-center justify-center rounded-full bg-primary-100 p-[3px]"
         >
            <img src="../../static/user/assets/icons/search.svg" />
          </div>
          <input
            type="text"
            class="form-input w-full pl-[50px] pr-[14px] text-base shadow-sm"
            placeholder="Search dress, skirt, top, necklace..."
          />
         
        </form>
      </div>


      <!-- For messages  -->
      {% if message %}
      <div class="message ">{{message}}</div>
      {% endif %}
      {% if messageError %}
      <div class="messageError">{{messageError}}</div>
      {% endif %}

      <!-- Banner -->
      <div
        class="relative mt-8 flex h-36 items-center rounded-xl bg-[#C5D8FD33] md:mt-[42px] md:h-44 lg:mx-[5%] lg:mt-[60px] lg:h-80"
      >
        <img
          src="../../static/user/assets/images/banner/unsplash_TdDvd7To4IU.png"
          alt="banner-img"
          class="absolute -left-5 h-full w-[100px] md:left-0 md:w-auto"
        />
        <img
          src="../../static/user/assets/icons/graphic.svg"
          alt="banner-graphic"
          class="absolute -top-2 left-8 -z-10 size-[80px] md:-top-5 md:left-16 md:size-[137px] lg:-top-10 lg:left-32 lg:size-[250px]"
        />
        <img
          src="../../static/user/assets/images/banner/unsplash_H1SgBRy5xVs.png"
          alt="banner-img"
          class="absolute right-[8%] h-full w-[200px] md:right-[15%] lg:w-auto"
        />

        <img
          src="../../static/user/assets/images/banner/unsplash_u0TFS_wnqPE.png"
          alt="banner-img"
          class="absolute right-0 h-full w-[100px] md:w-auto"
        />
        <div class="z-10 ml-[18%] md:ml-[30%]">
          <h2 class="font-bold text-[#275ECD] md:text-2xl lg:text-4xl">
            Grab up to 50% off on
            <p>selected dresses!</p>
          </h2>
          <button class="primary-btn--large mt-3">
            Explore <span class="hidden md:block">Deals</span>
          </button>
        </div>
      </div>
    </header>

    <main class="mt-8 flex-1 flex-grow md:mt-[72px] lg:mt-14">
      <!-- categories -->
      <section class="w-full pl-5 md:px-[60px] lg:px-[80px]">
        <h2 class="text-lg md:text-2xl lg:text-2xl">Categories</h2>
        <div
          class="mt-4 flex gap-[18px] overflow-x-auto md:mt-5 md:justify-between md:gap-0 lg:mt-10 lg:gap-4"
          id="categories"
        >
        </div>
      </section>

      <!-- Top deals -->
      <section
        class="mt-12 w-full px-5 md:mt-[72px] md:px-[60px] lg:mt-[120px] lg:px-20"
      >
        <div class="flex items-center justify-between">
          <h2 class="text-xl md:text-2xl lg:text-4xl">New Listings</h2>
          <div class="flex gap-x-4">
            <svg stroke="#27A6CD" fill="rgb(19 127 160)" stroke-width="0" viewBox="0 0 16 16" class="sm:w-6 sm:h-6 w-32 h-32 text-main" height="25px" width="25px" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z">
              </path>
            </svg>
          </div>
        </div>
        <div
          class="mt-5 grid grid-cols-2 gap-4 md:mt-7 md:grid-cols-3 lg:mt-10 lg:grid-cols-4 lg:gap-[18px]"
        >
          
        {% if products != None and products != [] %}
        {% for product in products %}
        {% if loop.index <= 8 and product['createdAt'] > one_month_ago %}
        <div class="h-fit rounded-b-md shadow-md md:rounded-b-lg">
          {% if product['salesOffer'] %}
          <div style="background-color: green; 
                            font-size: 11px; 
                            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; 
                            color: white;
                            width: fit-content;
                            padding: 5px;
                            position:absolute;
                            float: right !important;
                            border-top-left-radius: 0.5rem ;
                          ">
            save {{ product['salesOffer'] }}%-off
          </div>
          {%endif %}
  
          <a href="/product_detail/{{product['_id']}}" target="_blank"> <img src="{{product['images'][0]}}" alt=""
              class="max-h-40 w-full rounded-t-md md:max-h-48 md:rounded-t-lg lg:max-h-[324px]"
              style="height: 296.5px !important;" /></a>
          <div class="rounded-b-md bg-white px-2 py-[10px] md:px-[10px] lg:p-4">
            <div style="display: flex; flex-direction: row; justify-content: space-between;">
              <span class="ml-1 text-[8px] text-secondary-500 md:text-[10px] lg:text-base"
                style="font-size: 10px; color: rgb(19 127 160) ; margin-left: 0px !important;">+{{product['variants'] |
                count}} variants/colors</span>
              {% if product['featured'] and product['featured'] =='on' %}
              <div
                style="font-size: 11px; font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; color: rgb(106, 104, 104); width: fit-content;">
                sponsored
              </div>
              {%endif%}
  
            </div>
  
            <h4 class="text-xs md:text-sm lg:text-xl">{{product["title"] | upper}}</h4>
  
            <div class="mt-2 flex items-center justify-between md:mt-[10px]">
              <div class="flex flex-col">
                <div class="flex items-center">
                  {% if all_reviews is defined and all_reviews != [] and product['_id'] in all_reviews | map(attribute='product_id') | map('string') | list %}
                  <!-- calculate the ratings -->
                  {% set ratings = all_reviews | selectattr('product_id', 'equalto', product["_id"]) |
                  map(attribute='rating') | map('int') | list %}
                  {% set total_rating = ratings | sum %}
                  {% set review_count = ratings | length %}
                  {% set average_rating = (total_rating / review_count) if review_count > 0 else 0 %}
  
                  {% for i in range(1, average_rating | round(0) | int + 1) %}
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:#ff8f00;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:#e68100;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  {% endfor %}
                  <a class="ml-1 text-sm text-secondary-500 md:text-base" href="#review-section">({{review_count}})</a>
                  
                  {% else %}
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
  
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
   
  
                  <a class="ml-1 text-sm text-secondary-500 md:text-base" href="#review-section">(0)</a>
  
                  {% endif %}
                </div>
                <span class="mt-1 text-xs font-semibold md:mt-2 md:text-sm lg:text-lg">
                  {% if product['salesOffer'] is defined and product['salesOffer'] | int > 0 %}
                  {% set price = product['price'] | float - (product['price'] | float * product['salesOffer'] | int / 100) %}
                    $<del>{{product['price']}}</del>  {{ price  | round(1) }}
                  {% else %}
                      ${{product['price']}}
                  {% endif %}
                  
                </span>
              </div>
              <form action="/api/orders/add_to_cart" method="post">
                <input type="hidden" name="product_id" value="{{product['_id']}}">
                <input type="hidden" name="variant" value="{{product['variants'][0]}}">
                <input type="hidden" name="qty" value="1">
                <button class="flex size-8 items-center justify-center rounded-full bg-primary-800 md:size-9 lg:size-14">
                  <img src="../../static/user/assets/icons/shopping-bag-white.svg" alt=""
                    class="size-4 md:size-6 lg:size-8" />
                </button>
              </form>
  
            </div>
          </div>
        </div>
        {%endif%}
        {% endfor %}
        {% else %}
        <div class="bg-white p-5 shadow rounded mx-auto"
          style="display: flex; flex-direction: row; width: 200px; justify-content: stretch;">
          <img
            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEaUlEQVR4nO2Y729TZRTH+05Jpu9Mip1RyAbiImMyEmNioib6DyAqxJhAlm3gQFEgm4pk4mBZYGEy2dZu69piRCeExBAVo81eKFjJModTGPthf2zt2hW69W5t13Yf83RsTFjXQu8tLuk3OW9u7k0+3+c+zznPOSpVRhlldE8ywcMm2GyIomuLYGmL4NZHmNKHmWoN424OY2kJo20K8UYzPKT6v8gAq4zQYowyYZiGtuhM6EVEoDUCLeGZ0E2BNgRNQSYagzQ3BMm9b+BfwzIjHDFA2DgNScOHoDEIJwJQP8nU8Qlq9PBgWuG/gFwTXDYC9wr/+YwBPpuAY34u1EosTwu8AQpM4JYLvk6CYxIcHcde42dtOlZedvhaf8wAR8aw10ioFYEX+9QEXQrCUzMG1T4uHbWxTHYD4sCmAZ7D1+FTL5Wyp8pUss3dwFd54eAo/gMjMm6lWJ5PHzyVHjjg5oRsFTaZInVcilI9Gk4Iv98Z5pA3mgiej0eQ9npkqNix60ES8IVnXTx/zp1w5Z/9doRnzrg4OBpdDJ6PXPChk9dTNhC72yQBr2mxsdLoSLhtVhjssXcLzrioHInGhf/ACeXDNKVsIHYxSwJexIazroR7XoDPvr/utIv9zmg8ePYOcSFlA/oInngH9sUfPHMwYvUrbMGEB3ZXf5AVBsfcd8+d8ywIv28I9tgZSdlAa4RQvGxTNx6ltEeiqNtP9fVI0tmmwhFh8yU/WzolKhzRheEd8L6dYOoGwoQUTJWLwbPbJo8Bz32CZ5dVhi10s5NKO/w7VigbkOEQizbwLq7ElPUGePknL3lfDfN4mz0WT50a5qUfvRT1BGLgycDvHIS3+2lM2YDoYZOB3/NPkPzTzrnsEi+ebndS/HcwMfwAbB9gU8oG6iGrMYi0GPzWPyQe088UqNnIPemI5fn8b1zkmG6lTRHZejsbf5MWhS/tQ9rxJ1kqOSQa8HjwO3sDM3XA4OCVn70U/zVJpfvOCls+FOWtrkleOO+dqwNbugILr3w/FPehVcklMT0QDfhCB7bSFWFbt0SVdzrpA7vbOs1Gi8T2a5EF4Uv6CG29ykqVnBLTA6WyzW3wFF3jsEqJllJMD5SGf9VyYyrP2JmvUkL1EuracWxKwb95OcBqw+882X7FWXB+dI0iJsToIzY9kBu+e5K8k52sPtXDuu+dFHb4HAVmX44iJqrGeaTaR4dc8JssN0K5BssM/HfDbOgYi8V6s+/XbJ1NGRN18ICYHnwyipQCfKiol0Nrv+xatab9yqBY+Vn4QrNvQKO3u5ZrbU61blCZ7SQkpgeiARc9bLLwokiV9NE0P1Xmm51PFHaMDf4HXmcjFkqbuGkkS/Sw5UM07hviomhG3rMTetdGSNwqywa5uKOfhpIBXotXYQvMvpz1Zt8v2XrHLfh0mpBDmgZ7rlpnddxhIGMizdJk/sQS+BNqnfWqailIs5AJrXVarbWWqpaKNPNNLDX420z0Ptps2zb3MKOMMlLN17/5kBsrP3kn/AAAAABJRU5ErkJggg=="
            alt="nothing-found" width="30px">
          <span class="text-danger" style="color: rgb(0, 180, 216); font-size: 20px;">Nothing Found!</span>
          <!-- <button class="btn btn-danger" onclick="window.history.back()">Go Back</button> -->
        </div>
        {% endif %}






        </div>
      </section>

      <!--Browse Styles  -->
      <section
        class="mt-12 px-5 md:mt-[72px] md:px-[60px] lg:mt-[120px] lg:px-20"
      >
        <h2 class="text-2xl md:text-4xl lg:text-6xl">
          We've Got
          <p>ur taste</p>
        </h2>
        <div class="mt-6 grid grid-cols-1 gap-4 md:grid-cols-5 lg:gap-6">
          <div
            class="hidden h-44 rounded-lg bg-[url('/assets/images/unsplash_-lO2m-_010k.png')] bg-cover p-4 md:block md:col-span-2 md:h-[188px] md:p-[18px] lg:h-96 lg:p-8"
          >
          
            <h3 class="text-xl lg:text-4xl">Formal</h3>
          </div>
          <div
            class="h-44 rounded-lg bg-[url('/assets/images/unsplash_fvL1QAugjLw.png')] bg-cover p-4 md:col-span-3 md:h-[188px] md:p-[18px] lg:h-96 lg:p-8"
          >
            <h3 class="text-xl lg:text-4xl">Casual</h3>
          </div>
          <div
            class="h-44 rounded-lg bg-[url('/assets/images/unsplash_1IjSF0_6mj8.png')] bg-cover p-4 md:col-span-3 md:block md:h-[188px] md:p-[18px] lg:h-96 lg:p-8"
          >
            <h3 class="text-xl lg:text-4xl">Party</h3>
          </div>
          <div
            class="hidden h-44 rounded-lg bg-[url('/assets/images/unsplash_VhxMsH9Z2O0.png')] bg-cover p-4 md:col-span-2 md:block md:h-[188px] md:p-[18px] lg:h-96 lg:p-8"
          >
            <h3 class="text-xl lg:text-4xl">Gym</h3>
          </div>
        </div>
      </section>

      <!-- womens clothing -->
      <section
        class="mt-12 w-full px-5 md:mt-[72px] md:px-[60px] lg:mt-[120px] lg:px-20"
      >
        <div class="flex items-center justify-between">
          <h2 class="text-xl md:text-2xl lg:text-4xl">Clothings</h2>
          <div class="flex gap-x-4">
            <svg stroke="#27A6CD" fill="rgb(19 127 160)" stroke-width="0" viewBox="0 0 16 16" class="sm:w-6 sm:h-6 w-32 h-32 text-main" height="25px" width="25px" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z">
              </path>
            </svg>
          </div>
        </div>
        <div
          class="mt-5 grid grid-cols-2 gap-4 md:mt-7 md:grid-cols-3 lg:mt-10 lg:grid-cols-4 lg:gap-[18px]"
        >
        {% if products != None and products != [] %}
        {% for product in products %}
        {% if loop.index <= 8 and product['category'] == "womens" %}
        <div class="h-fit rounded-b-md shadow-md md:rounded-b-lg">
          {% if product['salesOffer'] %}
          <div style="background-color: green; 
                            font-size: 11px; 
                            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; 
                            color: white;
                            width: fit-content;
                            padding: 5px;
                            position:absolute;
                            float: right !important;
                            border-top-left-radius: 0.5rem ;
                          ">
            save {{ product['salesOffer'] }}%-off
          </div>
          {%endif %}
  
          <a href="/product_detail/{{product['_id']}}" target="_blank"> <img src="{{product['images'][0]}}" alt=""
              class="max-h-40 w-full rounded-t-md md:max-h-48 md:rounded-t-lg lg:max-h-[324px]"
              style="height: 296.5px !important;" /></a>
          <div class="rounded-b-md bg-white px-2 py-[10px] md:px-[10px] lg:p-4">
            <div style="display: flex; flex-direction: row; justify-content: space-between;">
              <span class="ml-1 text-[8px] text-secondary-500 md:text-[10px] lg:text-base"
                style="font-size: 10px; color: rgb(19 127 160) ; margin-left: 0px !important;">+{{product['variants'] |
                count}} variants/colors</span>
              {% if product['featured'] and product['featured'] =='on' %}
              <div
                style="font-size: 11px; font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; color: rgb(106, 104, 104); width: fit-content;">
                sponsored
              </div>
              {%endif%}
  
            </div>
  
            <h4 class="text-xs md:text-sm lg:text-xl">{{product["title"] | upper}}</h4>
  
            <div class="mt-2 flex items-center justify-between md:mt-[10px]">
              <div class="flex flex-col">
                <div class="flex items-center">
                  {% if all_reviews is defined and all_reviews != [] and product['_id'] in all_reviews | map(attribute='product_id') | map('string') | list %}
                  <!-- calculate the ratings -->
                  {% set ratings = all_reviews | selectattr('product_id', 'equalto', product["_id"]) |
                  map(attribute='rating') | map('int') | list %}
                  {% set total_rating = ratings | sum %}
                  {% set review_count = ratings | length %}
                  {% set average_rating = (total_rating / review_count) if review_count > 0 else 0 %}
  
                  {% for i in range(1, average_rating | round(0) | int + 1) %}
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:#ff8f00;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:#e68100;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  {% endfor %}
                  <a class="ml-1 text-sm text-secondary-500 md:text-base" href="#review-section">({{review_count}})</a>
                  
                  {% else %}
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
  
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
   
  
                  <a class="ml-1 text-sm text-secondary-500 md:text-base" href="#review-section">(0)</a>
  
                  {% endif %}
                </div>
                <span class="mt-1 text-xs font-semibold md:mt-2 md:text-sm lg:text-lg">
                  {% if product['salesOffer'] is defined and product['salesOffer'] | int > 0 %}
                  {% set price = product['price'] | float - (product['price'] | float * product['salesOffer'] | int / 100) %}
                    $<del>{{product['price']}}</del>  {{ price  | round(1) }}
                  {% else %}
                      ${{product['price']}}
                  {% endif %}
                  
                </span>
              </div>
              <form action="/api/orders/add_to_cart" method="post">
                <input type="hidden" name="product_id" value="{{product['_id']}}">
                <input type="hidden" name="variant" value="{{product['variants'][0]}}">
                <input type="hidden" name="qty" value="1">
                <button class="flex size-8 items-center justify-center rounded-full bg-primary-800 md:size-9 lg:size-14">
                  <img src="../../static/user/assets/icons/shopping-bag-white.svg" alt=""
                    class="size-4 md:size-6 lg:size-8" />
                </button>
              </form>
  
            </div>
          </div>
        </div>
        {%endif%}
        {% endfor %}
        {% else %}
        <div class="bg-white p-5 shadow rounded mx-auto"
          style="display: flex; flex-direction: row; width: 200px; justify-content: stretch;">
          <img
            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEaUlEQVR4nO2Y729TZRTH+05Jpu9Mip1RyAbiImMyEmNioib6DyAqxJhAlm3gQFEgm4pk4mBZYGEy2dZu69piRCeExBAVo81eKFjJModTGPthf2zt2hW69W5t13Yf83RsTFjXQu8tLuk3OW9u7k0+3+c+zznPOSpVRhlldE8ywcMm2GyIomuLYGmL4NZHmNKHmWoN424OY2kJo20K8UYzPKT6v8gAq4zQYowyYZiGtuhM6EVEoDUCLeGZ0E2BNgRNQSYagzQ3BMm9b+BfwzIjHDFA2DgNScOHoDEIJwJQP8nU8Qlq9PBgWuG/gFwTXDYC9wr/+YwBPpuAY34u1EosTwu8AQpM4JYLvk6CYxIcHcde42dtOlZedvhaf8wAR8aw10ioFYEX+9QEXQrCUzMG1T4uHbWxTHYD4sCmAZ7D1+FTL5Wyp8pUss3dwFd54eAo/gMjMm6lWJ5PHzyVHjjg5oRsFTaZInVcilI9Gk4Iv98Z5pA3mgiej0eQ9npkqNix60ES8IVnXTx/zp1w5Z/9doRnzrg4OBpdDJ6PXPChk9dTNhC72yQBr2mxsdLoSLhtVhjssXcLzrioHInGhf/ACeXDNKVsIHYxSwJexIazroR7XoDPvr/utIv9zmg8ePYOcSFlA/oInngH9sUfPHMwYvUrbMGEB3ZXf5AVBsfcd8+d8ywIv28I9tgZSdlAa4RQvGxTNx6ltEeiqNtP9fVI0tmmwhFh8yU/WzolKhzRheEd8L6dYOoGwoQUTJWLwbPbJo8Bz32CZ5dVhi10s5NKO/w7VigbkOEQizbwLq7ElPUGePknL3lfDfN4mz0WT50a5qUfvRT1BGLgycDvHIS3+2lM2YDoYZOB3/NPkPzTzrnsEi+ebndS/HcwMfwAbB9gU8oG6iGrMYi0GPzWPyQe088UqNnIPemI5fn8b1zkmG6lTRHZejsbf5MWhS/tQ9rxJ1kqOSQa8HjwO3sDM3XA4OCVn70U/zVJpfvOCls+FOWtrkleOO+dqwNbugILr3w/FPehVcklMT0QDfhCB7bSFWFbt0SVdzrpA7vbOs1Gi8T2a5EF4Uv6CG29ykqVnBLTA6WyzW3wFF3jsEqJllJMD5SGf9VyYyrP2JmvUkL1EuracWxKwb95OcBqw+882X7FWXB+dI0iJsToIzY9kBu+e5K8k52sPtXDuu+dFHb4HAVmX44iJqrGeaTaR4dc8JssN0K5BssM/HfDbOgYi8V6s+/XbJ1NGRN18ICYHnwyipQCfKiol0Nrv+xatab9yqBY+Vn4QrNvQKO3u5ZrbU61blCZ7SQkpgeiARc9bLLwokiV9NE0P1Xmm51PFHaMDf4HXmcjFkqbuGkkS/Sw5UM07hviomhG3rMTetdGSNwqywa5uKOfhpIBXotXYQvMvpz1Zt8v2XrHLfh0mpBDmgZ7rlpnddxhIGMizdJk/sQS+BNqnfWqailIs5AJrXVarbWWqpaKNPNNLDX420z0Ptps2zb3MKOMMlLN17/5kBsrP3kn/AAAAABJRU5ErkJggg=="
            alt="nothing-found" width="30px">
          <span class="text-danger" style="color: rgb(0, 180, 216); font-size: 20px;">Nothing Found!</span>
          <!-- <button class="btn btn-danger" onclick="window.history.back()">Go Back</button> -->
        </div>
        {% endif %}
          
           
        </div>
      </section>

      <!-- Collections -->
      <section
        class="mt-12 grid w-full grid-cols-1 gap-6 px-5 md:mt-[72px] md:px-[60px] lg:mt-[120px] lg:grid-cols-2 lg:px-20"
      >
        <div class="flex flex-col gap-6">
          <div class="flex items-center justify-between">
            <h2 class="text-2xl md:text-4xl lg:text-6xl">
              We Pride On The
              <p>Best Collections</p>
            </h2>
            <div class="flex gap-x-4">
              <button
                class="size-10 rounded-full bg-primary-800 text-white lg:size-14"
              >
              <i class='fas fa-cart-arrow-down'></i>
              </button>
            </div>
          </div>
          <div class="h-64 w-full rounded-lg md:h-[474px] lg:h-full">
            <img
              src="../../static/user/assets/images/banner3.png"
              alt=""
              class="size-full rounded-lg"
            />
          </div>
        </div>
        <div class="flex flex-col gap-4">
          <div class="h-64 w-full rounded-lg md:h-[474px]">
            <img
              src="../../static/user/assets/images/banner2.png"
              class="size-full rounded-lg"
            />
          </div>
          <p class="text-lg font-light text-secondary-700 lg:mt-4 lg:text-2xl">
            Ready to revamp your style or find that perfect gift? 🌟 Dive into our stunning collections
          </p>
          <button
            class="w-full rounded-lg bg-primary-600 px-8 py-4 text-lg text-white md:w-fit"
          >
            <a href="/catalog">Explore</a>
          </button>
        </div>
      </section>

      <!-- For Kids -->
      <section
        class="mt-12 w-full px-5 md:mt-[72px] md:px-[60px] lg:mt-[120px] lg:px-20"
      >
        <div class="flex items-center justify-between">
          <h2 class="text-xl md:text-2xl lg:text-4xl">For Kids</h2>
          <svg stroke="#27A6CD" fill="rgb(19 127 160)" stroke-width="0" viewBox="0 0 16 16" class="sm:w-6 sm:h-6 w-32 h-32 text-main" height="25px" width="25px" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z">
            </path>
          </svg>
          </div>
        </div>
        <div
          class="mt-5 grid grid-cols-2 gap-4 md:mt-7 md:grid-cols-3 lg:mt-10 lg:grid-cols-4 lg:gap-[18px]"
        >
        {% if products != None and products != [] %}
        {% for product in products %}
        {% if loop.index <= 8 and product['category'] == "kids" %}
        <div class="h-fit rounded-b-md shadow-md md:rounded-b-lg">
          {% if product['salesOffer'] %}
          <div style="background-color: green; 
                            font-size: 11px; 
                            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; 
                            color: white;
                            width: fit-content;
                            padding: 5px;
                            position:absolute;
                            float: right !important;
                            border-top-left-radius: 0.5rem ;
                          ">
            save {{ product['salesOffer'] }}%-off
          </div>
          {%endif %}
  
          <a href="/product_detail/{{product['_id']}}" target="_blank"> <img src="{{product['images'][0]}}" alt=""
              class="max-h-40 w-full rounded-t-md md:max-h-48 md:rounded-t-lg lg:max-h-[324px]"
              style="height: 296.5px !important;" /></a>
          <div class="rounded-b-md bg-white px-2 py-[10px] md:px-[10px] lg:p-4">
            <div style="display: flex; flex-direction: row; justify-content: space-between;">
              <span class="ml-1 text-[8px] text-secondary-500 md:text-[10px] lg:text-base"
                style="font-size: 10px; color: rgb(19 127 160) ; margin-left: 0px !important;">+{{product['variants'] |
                count}} variants/colors</span>
              {% if product['featured'] and product['featured'] =='on' %}
              <div
                style="font-size: 11px; font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; color: rgb(106, 104, 104); width: fit-content;">
                sponsored
              </div>
              {%endif%}
  
            </div>
  
            <h4 class="text-xs md:text-sm lg:text-xl">{{product["title"] | upper}}</h4>
  
            <div class="mt-2 flex items-center justify-between md:mt-[10px]">
              <div class="flex flex-col">
                <div class="flex items-center">
                  {% if all_reviews is defined and all_reviews != [] and product['_id'] in all_reviews | map(attribute='product_id') | map('string') | list %}
                  <!-- calculate the ratings -->
                  {% set ratings = all_reviews | selectattr('product_id', 'equalto', product["_id"]) |
                  map(attribute='rating') | map('int') | list %}
                  {% set total_rating = ratings | sum %}
                  {% set review_count = ratings | length %}
                  {% set average_rating = (total_rating / review_count) if review_count > 0 else 0 %}
  
                  {% for i in range(1, average_rating | round(0) | int + 1) %}
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:#ff8f00;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:#e68100;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  {% endfor %}
                  <a class="ml-1 text-sm text-secondary-500 md:text-base" href="#review-section">({{review_count}})</a>
                  
                  {% else %}
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
  
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
   
  
                  <a class="ml-1 text-sm text-secondary-500 md:text-base" href="#review-section">(0)</a>
  
                  {% endif %}
                </div>
                <span class="mt-1 text-xs font-semibold md:mt-2 md:text-sm lg:text-lg">
                  {% if product['salesOffer'] is defined and product['salesOffer'] | int > 0 %}
                  {% set price = product['price'] | float - (product['price'] | float * product['salesOffer'] | int / 100) %}
                    $<del>{{product['price']}}</del>  {{ price  | round(1) }}
                  {% else %}
                      ${{product['price']}}
                  {% endif %}
                  
                </span>
              </div>
              <form action="/api/orders/add_to_cart" method="post">
                <input type="hidden" name="product_id" value="{{product['_id']}}">
                <input type="hidden" name="variant" value="{{product['variants'][0]}}">
                <input type="hidden" name="qty" value="1">
                <button class="flex size-8 items-center justify-center rounded-full bg-primary-800 md:size-9 lg:size-14">
                  <img src="../../static/user/assets/icons/shopping-bag-white.svg" alt=""
                    class="size-4 md:size-6 lg:size-8" />
                </button>
              </form>
  
            </div>
          </div>
        </div>
        {%endif%}
        {% endfor %}
        {% else %}
        <div class="bg-white p-5 shadow rounded mx-auto"
          style="display: flex; flex-direction: row; width: 200px; justify-content: stretch;">
          <img
            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEaUlEQVR4nO2Y729TZRTH+05Jpu9Mip1RyAbiImMyEmNioib6DyAqxJhAlm3gQFEgm4pk4mBZYGEy2dZu69piRCeExBAVo81eKFjJModTGPthf2zt2hW69W5t13Yf83RsTFjXQu8tLuk3OW9u7k0+3+c+zznPOSpVRhlldE8ywcMm2GyIomuLYGmL4NZHmNKHmWoN424OY2kJo20K8UYzPKT6v8gAq4zQYowyYZiGtuhM6EVEoDUCLeGZ0E2BNgRNQSYagzQ3BMm9b+BfwzIjHDFA2DgNScOHoDEIJwJQP8nU8Qlq9PBgWuG/gFwTXDYC9wr/+YwBPpuAY34u1EosTwu8AQpM4JYLvk6CYxIcHcde42dtOlZedvhaf8wAR8aw10ioFYEX+9QEXQrCUzMG1T4uHbWxTHYD4sCmAZ7D1+FTL5Wyp8pUss3dwFd54eAo/gMjMm6lWJ5PHzyVHjjg5oRsFTaZInVcilI9Gk4Iv98Z5pA3mgiej0eQ9npkqNix60ES8IVnXTx/zp1w5Z/9doRnzrg4OBpdDJ6PXPChk9dTNhC72yQBr2mxsdLoSLhtVhjssXcLzrioHInGhf/ACeXDNKVsIHYxSwJexIazroR7XoDPvr/utIv9zmg8ePYOcSFlA/oInngH9sUfPHMwYvUrbMGEB3ZXf5AVBsfcd8+d8ywIv28I9tgZSdlAa4RQvGxTNx6ltEeiqNtP9fVI0tmmwhFh8yU/WzolKhzRheEd8L6dYOoGwoQUTJWLwbPbJo8Bz32CZ5dVhi10s5NKO/w7VigbkOEQizbwLq7ElPUGePknL3lfDfN4mz0WT50a5qUfvRT1BGLgycDvHIS3+2lM2YDoYZOB3/NPkPzTzrnsEi+ebndS/HcwMfwAbB9gU8oG6iGrMYi0GPzWPyQe088UqNnIPemI5fn8b1zkmG6lTRHZejsbf5MWhS/tQ9rxJ1kqOSQa8HjwO3sDM3XA4OCVn70U/zVJpfvOCls+FOWtrkleOO+dqwNbugILr3w/FPehVcklMT0QDfhCB7bSFWFbt0SVdzrpA7vbOs1Gi8T2a5EF4Uv6CG29ykqVnBLTA6WyzW3wFF3jsEqJllJMD5SGf9VyYyrP2JmvUkL1EuracWxKwb95OcBqw+882X7FWXB+dI0iJsToIzY9kBu+e5K8k52sPtXDuu+dFHb4HAVmX44iJqrGeaTaR4dc8JssN0K5BssM/HfDbOgYi8V6s+/XbJ1NGRN18ICYHnwyipQCfKiol0Nrv+xatab9yqBY+Vn4QrNvQKO3u5ZrbU61blCZ7SQkpgeiARc9bLLwokiV9NE0P1Xmm51PFHaMDf4HXmcjFkqbuGkkS/Sw5UM07hviomhG3rMTetdGSNwqywa5uKOfhpIBXotXYQvMvpz1Zt8v2XrHLfh0mpBDmgZ7rlpnddxhIGMizdJk/sQS+BNqnfWqailIs5AJrXVarbWWqpaKNPNNLDX420z0Ptps2zb3MKOMMlLN17/5kBsrP3kn/AAAAABJRU5ErkJggg=="
            alt="nothing-found" width="30px">
          <span class="text-danger" style="color: rgb(0, 180, 216); font-size: 20px;">Nothing Found!</span>
          <!-- <button class="btn btn-danger" onclick="window.history.back()">Go Back</button> -->
        </div>
        {% endif %}
        </div>
      </section>

      <!-- Necklaces -->
      <section
        class="mb-20 mt-12 w-full px-5 md:mb-[70px] md:mt-[72px] md:px-[60px] lg:mb-40 lg:mt-[120px] lg:px-20"
      >
        <div class="flex items-center justify-between">
          <h2 class="text-xl md:text-2xl lg:text-4xl">More Stuffs</h2>
          <div class="flex gap-x-4">
            <svg stroke="#27A6CD" fill="rgb(19 127 160)" stroke-width="0" viewBox="0 0 16 16" class="sm:w-6 sm:h-6 w-32 h-32 text-main" height="25px" width="25px" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z">
              </path>
            </svg>
          </div>
        </div>
        <div
          class="mt-5 grid grid-cols-2 gap-4 md:mt-7 md:grid-cols-3 lg:mt-10 lg:grid-cols-4 lg:gap-[18px]"
        >
        {% if products != None and products != [] %}
        {% for product in products %}
        {% if loop.index <= 16 and product['category'] not in ['kids', 'womens'] %}
        <div class="h-fit rounded-b-md shadow-md md:rounded-b-lg">
          {% if product['salesOffer'] %}
          <div style="background-color: green; 
                            font-size: 11px; 
                            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; 
                            color: white;
                            width: fit-content;
                            padding: 5px;
                            position:absolute;
                            float: right !important;
                            border-top-left-radius: 0.5rem ;
                          ">
            save {{ product['salesOffer'] }}%-off
          </div>
          {%endif %}
  
          <a href="/product_detail/{{product['_id']}}" target="_blank"> <img src="{{product['images'][0]}}" alt=""
              class="max-h-40 w-full rounded-t-md md:max-h-48 md:rounded-t-lg lg:max-h-[324px]"
              style="height: 296.5px !important;" /></a>
          <div class="rounded-b-md bg-white px-2 py-[10px] md:px-[10px] lg:p-4">
            <div style="display: flex; flex-direction: row; justify-content: space-between;">
              <span class="ml-1 text-[8px] text-secondary-500 md:text-[10px] lg:text-base"
                style="font-size: 10px; color: rgb(19 127 160) ; margin-left: 0px !important;">+{{product['variants'] |
                count}} variants/colors</span>
              {% if product['featured'] and product['featured'] =='on' %}
              <div
                style="font-size: 11px; font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; color: rgb(106, 104, 104); width: fit-content;">
                sponsored
              </div>
              {%endif%}
  
            </div>
  
            <h4 class="text-xs md:text-sm lg:text-xl">{{product["title"] | upper}}</h4>
  
            <div class="mt-2 flex items-center justify-between md:mt-[10px]">
              <div class="flex flex-col">
                <div class="flex items-center">
                  {% if all_reviews is defined and all_reviews != [] and product['_id'] in all_reviews | map(attribute='product_id') | map('string') | list %}
                  <!-- calculate the ratings -->
                  {% set ratings = all_reviews | selectattr('product_id', 'equalto', product["_id"]) |
                  map(attribute='rating') | map('int') | list %}
                  {% set total_rating = ratings | sum %}
                  {% set review_count = ratings | length %}
                  {% set average_rating = (total_rating / review_count) if review_count > 0 else 0 %}
  
                  {% for i in range(1, average_rating | round(0) | int + 1) %}
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:#ff8f00;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:#e68100;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  {% endfor %}
                  <a class="ml-1 text-sm text-secondary-500 md:text-base" href="#review-section">({{review_count}})</a>
                  
                  {% else %}
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
  
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
                  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="15" height="15"
                    style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd"
                    viewBox="0 0 6.827 6.827">
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923-1.343.923-.239.164.082-.278.462-1.564-1.292-.992-.23-.176.29-.008 1.63-.044.544-1.535.097-.274z" />
                    <path style="fill:grey;fill-rule:nonzero"
                      d="m3.51 1.252.546 1.536 1.628.043.29.008-.23.176-1.293.993.463 1.563.082.277-.239-.163-1.344-.923V.98z" />
                    <path style="fill:none" d="M0 0h6.827v6.827H0z" />
                  </svg>
   
  
                  <a class="ml-1 text-sm text-secondary-500 md:text-base" href="#review-section">(0)</a>
  
                  {% endif %}
                </div>
                <span class="mt-1 text-xs font-semibold md:mt-2 md:text-sm lg:text-lg">
                  {% if product['salesOffer'] is defined and product['salesOffer'] | int > 0 %}
                  {% set price = product['price'] | float - (product['price'] | float * product['salesOffer'] | int / 100) %}
                    $<del>{{product['price']}}</del>  {{ price  | round(1) }}
                  {% else %}
                      ${{product['price']}}
                  {% endif %}
                  
                </span>
              </div>
              <form action="/api/orders/add_to_cart" method="post">
                <input type="hidden" name="product_id" value="{{product['_id']}}">
                <input type="hidden" name="variant" value="{{product['variants'][0]}}">
                <input type="hidden" name="qty" value="1">
                <button class="flex size-8 items-center justify-center rounded-full bg-primary-800 md:size-9 lg:size-14">
                  <img src="../../static/user/assets/icons/shopping-bag-white.svg" alt=""
                    class="size-4 md:size-6 lg:size-8" />
                </button>
              </form>
  
            </div>
          </div>
        </div>
        {%endif%}
        {% endfor %}
        {% else %}
        <div class="bg-white p-5 shadow rounded mx-auto"
          style="display: flex; flex-direction: row; width: 200px; justify-content: stretch;">
          <img
            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEaUlEQVR4nO2Y729TZRTH+05Jpu9Mip1RyAbiImMyEmNioib6DyAqxJhAlm3gQFEgm4pk4mBZYGEy2dZu69piRCeExBAVo81eKFjJModTGPthf2zt2hW69W5t13Yf83RsTFjXQu8tLuk3OW9u7k0+3+c+zznPOSpVRhlldE8ywcMm2GyIomuLYGmL4NZHmNKHmWoN424OY2kJo20K8UYzPKT6v8gAq4zQYowyYZiGtuhM6EVEoDUCLeGZ0E2BNgRNQSYagzQ3BMm9b+BfwzIjHDFA2DgNScOHoDEIJwJQP8nU8Qlq9PBgWuG/gFwTXDYC9wr/+YwBPpuAY34u1EosTwu8AQpM4JYLvk6CYxIcHcde42dtOlZedvhaf8wAR8aw10ioFYEX+9QEXQrCUzMG1T4uHbWxTHYD4sCmAZ7D1+FTL5Wyp8pUss3dwFd54eAo/gMjMm6lWJ5PHzyVHjjg5oRsFTaZInVcilI9Gk4Iv98Z5pA3mgiej0eQ9npkqNix60ES8IVnXTx/zp1w5Z/9doRnzrg4OBpdDJ6PXPChk9dTNhC72yQBr2mxsdLoSLhtVhjssXcLzrioHInGhf/ACeXDNKVsIHYxSwJexIazroR7XoDPvr/utIv9zmg8ePYOcSFlA/oInngH9sUfPHMwYvUrbMGEB3ZXf5AVBsfcd8+d8ywIv28I9tgZSdlAa4RQvGxTNx6ltEeiqNtP9fVI0tmmwhFh8yU/WzolKhzRheEd8L6dYOoGwoQUTJWLwbPbJo8Bz32CZ5dVhi10s5NKO/w7VigbkOEQizbwLq7ElPUGePknL3lfDfN4mz0WT50a5qUfvRT1BGLgycDvHIS3+2lM2YDoYZOB3/NPkPzTzrnsEi+ebndS/HcwMfwAbB9gU8oG6iGrMYi0GPzWPyQe088UqNnIPemI5fn8b1zkmG6lTRHZejsbf5MWhS/tQ9rxJ1kqOSQa8HjwO3sDM3XA4OCVn70U/zVJpfvOCls+FOWtrkleOO+dqwNbugILr3w/FPehVcklMT0QDfhCB7bSFWFbt0SVdzrpA7vbOs1Gi8T2a5EF4Uv6CG29ykqVnBLTA6WyzW3wFF3jsEqJllJMD5SGf9VyYyrP2JmvUkL1EuracWxKwb95OcBqw+882X7FWXB+dI0iJsToIzY9kBu+e5K8k52sPtXDuu+dFHb4HAVmX44iJqrGeaTaR4dc8JssN0K5BssM/HfDbOgYi8V6s+/XbJ1NGRN18ICYHnwyipQCfKiol0Nrv+xatab9yqBY+Vn4QrNvQKO3u5ZrbU61blCZ7SQkpgeiARc9bLLwokiV9NE0P1Xmm51PFHaMDf4HXmcjFkqbuGkkS/Sw5UM07hviomhG3rMTetdGSNwqywa5uKOfhpIBXotXYQvMvpz1Zt8v2XrHLfh0mpBDmgZ7rlpnddxhIGMizdJk/sQS+BNqnfWqailIs5AJrXVarbWWqpaKNPNNLDX420z0Ptps2zb3MKOMMlLN17/5kBsrP3kn/AAAAABJRU5ErkJggg=="
            alt="nothing-found" width="30px">
          <span class="text-danger" style="color: rgb(0, 180, 216); font-size: 20px;">Nothing Found!</span>
          <!-- <button class="btn btn-danger" onclick="window.history.back()">Go Back</button> -->
        </div>
        {% endif %}



        </div>
      </section>
    </main>

   {% include 'user/footer.html' %}

    <script src="../../static/user/index.js"></script>
  </body>
</html>